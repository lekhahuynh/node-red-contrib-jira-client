<script type="text/javascript">
  const paletteLabel = "find issue";
  RED.nodes.registerType("jira-find-issue", {
    category: "jira",
    color: "#0082c9",
    paletteLabel: paletteLabel,
    defaults: {
      wname: { value: "" },
      server: { type: "jira-credentials", required: true },
      issueNumber: { value: "", required: false },
    },
    inputs: 1,
    outputs: 1,
    outputLabels: ["stdout"],
    icon: "exc-jira-client.png",
    label: function () {
      return this.wname || paletteLabel;
    },
  });
</script>

<script type="text/x-red" data-template-name="jira-find-issue">
    <div class="form-row">
        <label for="node-input-wname"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-wname" placeholder="Name">
    </div>
  <div class="form-row">
     	<label for="node-input-server"><i class="fa fa-server"></i> Server</label>
     	<input type="text" id="node-input-server">
  </div>
  <div class="form-row">
         <label for="node-input-issue-number"><i class="fa fa-sitemap"></i> Issue Number</label>
         <input type="text" id="node-input-issueNumber">
     </div>
</script>

<script type="text/x-red" data-help-name="jira-find-issue">
  <p>Connects to a Jira server and find issue by issue number</p>

  <h3>Inputs</h3>
     <dl class="message-properties">
         <dt>payload
             <span class="property-type">any</span>
         </dt>
         <dd> Incoming message triggers receiving a list containing a directory content. Any payload
         is possible. </dd>
         <dt class="optional">issueNumber <span class="property-type">string</span></dt>
         <dd> A directory can be specified on incoming message or in nodes properties. Downloads the
         content of the users root directory if not set.</dd>
     </dl>

  <h3>Outputs</h3>
     <dl class="message-properties">
         <dt>payload
             <span class="property-type">Array</span>
         </dt>
         <dd> Output payload is an array of objects (one object for each directory or file entry)</dd>
         <dt class="optional">filename <span class="property-type">string</span></dt>
         <dd> full path and filename</dd>
  	<dt class="optional">basename <span class="property-type">string</span></dt>
         <dd> filename without path</dd>
         <dt class="optional">lastmod <span class="property-type">string</span></dt>
         <dd> Last modified data, e.g. "Sun, 29 Apr 2018 10:57:57 GMT"</dd>
         <dt class="optional">size <span class="property-type">number</span></dt>
         <dd> File size in Bytes</dd>
         <dt class="optional">type <span class="property-type">string</span></dt>
         <dd> Type of entry, e.g "file" or "directory"</dd>
         <dt class="optional">mime <span class="property-type">string</span></dt>
         <dd> Mime type, e.g. "image/svg+xml"</dd>
     </dl>
</script>
